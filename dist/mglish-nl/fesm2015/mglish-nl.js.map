{"version":3,"file":"mglish-nl.js.map","sources":["ng://mglish-nl/lib/mglish-nl.service.ts","ng://mglish-nl/lib/mglish-nl.component.ts","ng://mglish-nl/lib/mglish-nl.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MglishNlService {\n  private debug = true;\n\n  constructor(private http: HttpClient) { }\n\n  private request(text: string, apiKeyGoogle: string) {\n    const params = new HttpParams().append('key', apiKeyGoogle);\n    const url = 'https://cors-anywhere.herokuapp.com/https://language.googleapis.com/v1beta2/documents:analyzeSyntax';\n    const request = {\n      'document': {\n        'content': text,\n        'type': 'PLAIN_TEXT',\n      },\n      'encodingType': 'UTF8',\n    };\n    const options = { headers: { 'Content-Type': 'application/json' }, params: params };\n\n    return this.http.post(url, JSON.stringify(request), options);\n  }\n\n  chunkText(text: string, apiKeyGoogle: string) {\n    const textToChunk = text.replace(/\\â|\\â/g, '\\\"').replace(/\\â/g, '\\'').replace(/\\â/g, '\\-').replace(/\\â¦/g, '...');\n    return new Observable((subscriber) => this.request(textToChunk, apiKeyGoogle).subscribe(\n      (result: any) => {\n        subscriber.next(this.getTextWithChunk(result, textToChunk));\n        subscriber.complete();\n      },\n      error => {\n        subscriber.error(error);\n      })\n    );\n  }\n\n  chunkTextArray(textArray: string[], apiKeyGoogle: string) {\n    let textToChunk = '';\n    for (let i = 0; i < textArray.length; i++) {\n      textToChunk += textArray[i] + 'ã';\n    }\n    textToChunk = textToChunk.replace(/\\â|\\â/g, '\\\"').replace(/\\â/g, '\\'').replace(/\\â/g, '\\-').replace(/\\â¦/g, '...');\n    return new Observable((subscriber) => this.request(textToChunk, apiKeyGoogle).subscribe(\n      (result: any) => {\n        const textWithChunk = this.getTextWithChunk(result, textToChunk.replace(/ã/g, '|||'));\n        const textChunkArray = textWithChunk.split(/\\|{3,}/g);\n        textChunkArray.pop();\n        subscriber.next(textChunkArray);\n        subscriber.complete();\n      },\n      error => {\n        subscriber.error(error);\n      })\n    );\n  }\n\n  textWithMitre(text: string, apiKeyGoogle: string) {\n    const textToChunk = text.replace(/\\â|\\â/g, '\\\"').replace(/\\â/g, '\\'').replace(/\\â/g, '\\-');\n    return new Observable((subscriber) => this.request(textToChunk, apiKeyGoogle).subscribe(\n      (result: any) => {\n        subscriber.next(this.getTextWithMitre(result, textToChunk));\n        subscriber.complete();\n      },\n      error => {\n        subscriber.error(error);\n      })\n    );\n  }\n\n  textWithBreakLine(text: string, apiKeyGoogle: string) {\n    const textToChunk = text.replace(/\\â|\\â/g, '\\\"').replace(/\\â/g, '\\'').replace(/\\â/g, '\\-');\n    return new Observable((subscriber) => this.request(textToChunk, apiKeyGoogle).subscribe(\n      (result: any) => {\n        subscriber.next(this.getTextWithBreakLine(result, textToChunk));\n        subscriber.complete();\n      },\n      error => {\n        subscriber.error(error);\n      })\n    );\n  }\n\n  chunkPositionList(text: string, apiKeyGoogle: string) {\n    const textToChunk = text.replace(/\\â|\\â/g, '\\\"').replace(/\\â/g, '\\'').replace(/\\â/g, '\\-');\n    return new Observable((subscriber) => this.request(textToChunk, apiKeyGoogle).subscribe(\n      (result: any) => {\n        subscriber.next(this.handle(result, textToChunk));\n        subscriber.complete();\n      },\n      error => {\n        subscriber.error(error);\n      })\n    );\n  }\n\n\n  private getTextWithMitre(result: { sentences: [], tokens: [], language: string }, text: string) {\n    const chunkPositionList = this.handle(result, text);\n    if (Object.keys(chunkPositionList).length === 0) {\n      return 'ã' + text + 'ã';\n    } else {\n      let newText = '';\n      let previousPosition = 0;\n      let fragment = '';\n      for (const key in chunkPositionList) {\n        if (chunkPositionList.hasOwnProperty(key)) {\n          const tmp = text.substring(chunkPositionList[previousPosition], chunkPositionList[key]);\n          let countBegin = 0;\n          let countEnd = tmp.length - 1;\n          while (countBegin < tmp.length && tmp.charAt(countBegin) === '\\n') {\n            countBegin++;\n          }\n          while (countEnd > 0 && tmp.charAt(countEnd) === '\\n') {\n            countEnd--;\n          }\n          countEnd = tmp.length - 1 - countEnd;\n\n          fragment = '\\n'.repeat(countBegin);\n          fragment += 'ã';\n          fragment += tmp.trim();\n          fragment += 'ã' + '\\n'.repeat(countEnd);\n          if (countEnd === 0) {\n            fragment += 'ã';\n          }\n\n          newText = newText + fragment;\n          previousPosition = +key;\n        }\n      }\n      const tmpLast = text.substring(chunkPositionList[previousPosition], text.length);\n      let count = 0;\n      while (count < tmpLast.length && tmpLast.charAt(count) === '\\n') {\n        count++;\n      }\n\n      fragment = count === 0 ? '' : '\\n'.repeat(count);\n      fragment += 'ã' + tmpLast.trim() + 'ã';\n      newText = newText + fragment;\n      return newText;\n    }\n  }\n\n  private getTextWithBreakLine(result: { sentences: [], tokens: [], language: string }, text: string) {\n    const chunkPositionList = this.handle(result, text);\n    if (Object.keys(chunkPositionList).length === 0) {\n      return text;\n    } else {\n      const part = [];\n      let previousPosition = 0;\n      let fragment: string;\n      for (const key in chunkPositionList) {\n        if (chunkPositionList.hasOwnProperty(key)) {\n          fragment = text.substring(chunkPositionList[previousPosition], chunkPositionList[key]);\n          part.push(fragment);\n          previousPosition = +key;\n        }\n      }\n      fragment = text.substring(chunkPositionList[previousPosition], text.length);\n      part.push(fragment);\n      console.log(part);\n      return part.join('\\n');\n    }\n  }\n\n  private getTextWithChunk(result: { sentences: [], tokens: [], language: string }, text: string) {\n    const chunkPositionList = this.handle(result, text);\n    if (Object.keys(chunkPositionList).length === 0) {\n      return text;\n    } else {\n      const part = [];\n      let previousPosition = 0;\n      let fragment: string;\n      for (const key in chunkPositionList) {\n        if (chunkPositionList.hasOwnProperty(key)) {\n          fragment = text.substring(chunkPositionList[previousPosition], chunkPositionList[key]);\n          part.push(fragment);\n          previousPosition = +key;\n        }\n      }\n      fragment = text.substring(chunkPositionList[previousPosition], text.length);\n      part.push(fragment);\n      console.log(part);\n      return part.join('|');\n    }\n  }\n\n  handle(result: { sentences: [], tokens: [], language: string }, text: string) {\n    const chunkPositionList: Record<number, number> = {};\n    const tokens = result.tokens;\n\n    for (let i = 0; i < tokens.length; i++) {\n      switch (tokens[i]['dependencyEdge']['label']) {\n        case 'ROOT':\n          this.handleVerb(tokens, i, chunkPositionList);\n          break;\n        case 'CCOMP':\n          this.handleVerb(tokens, i, chunkPositionList);\n          break;\n        case 'RCMOD':\n          this.handleVerb(tokens, i, chunkPositionList);\n          break;\n        case 'CONJ':\n          if (this.isConjugateVerb(i, tokens) || tokens[tokens[i]['dependencyEdge']['headTokenIndex']]['dependencyEdge']['label'] === 'ROOT'\n            || tokens[tokens[i]['dependencyEdge']['headTokenIndex']]['dependencyEdge']['label'] === 'CCOMP'\n            || tokens[tokens[i]['dependencyEdge']['headTokenIndex']]['dependencyEdge']['label'] === 'RCMOD'\n            || tokens[tokens[i]['dependencyEdge']['headTokenIndex']]['dependencyEdge']['label'] === 'ADVCL'\n            || tokens[tokens[i]['dependencyEdge']['headTokenIndex']]['dependencyEdge']['label'] === 'PARATAXIS') {\n            this.handleVerb(tokens, i, chunkPositionList);\n          }\n          break;\n        case 'PARATAXIS':\n          if (this.isConjugateVerb(i, tokens)) {\n            this.handleVerb(tokens, i, chunkPositionList);\n          }\n          break;\n        case 'ADVCL':\n          if (tokens[i]['partOfSpeech']['tag'] === 'VERB') {\n            this.handleVerb(tokens, i, chunkPositionList);\n          }\n          break;\n        // acomp example : being able, cut after acomp if exist\n        case 'PCOMP':\n          if (i > 1 && i < tokens.length - 1) {\n            if (i < tokens.length - 2 && this.checkLabel(['ACOMP'], i + 1, tokens)) {\n              this.addChunk(chunkPositionList, i + 2, tokens, 'pcomp + acomp:' + i);\n            } else {\n              this.addChunk(chunkPositionList, i + 1, tokens, 'pcomp:' + i);\n            }\n          }\n          break;\n        case 'PREP':\n          // check if previous word is related, chunk if not\n          // special rules: break if previous word = aux\n          // chunk before previous words if previous word = mwe\n          if (i > 2 && (this.checkLabel(['AUX', 'AUXPASS'], i - 1, tokens)\n            && tokens[i - 1]['dependencyEdge']['headTokenIndex'] > i)) {\n            break;\n          }\n          if (i > 2 && ((this.checkLabel(['MWE'], i - 1, tokens) && tokens[i - 1]['dependencyEdge']['headTokenIndex'] === i))) {\n            this.checkCCAndChunk(chunkPositionList, i - 1, tokens, 'prep mwe:' + i);\n            break;\n          }\n          if (i > 0 && tokens[i]['dependencyEdge']['headTokenIndex'] !== i - 1 &&\n            tokens[i - 1]['dependencyEdge']['headTokenIndex'] !== i) {\n            if (i > 1 && this.isConjugateVerb(i - 2, tokens)) {\n              break;\n            }\n            this.checkCCAndChunk(chunkPositionList, i, tokens, 'prep:' + i);\n          }\n          break;\n        case 'MARK':\n          if (i > 1) {\n            this.addChunk(chunkPositionList, i, tokens, 'mark: ' + i);\n          }\n          break;\n        case 'NSUBJ':\n          this.handleSubj(tokens, i, chunkPositionList);\n          break;\n        case 'NSUBJPASS':\n          this.handleSubj(tokens, i, chunkPositionList);\n          break;\n        case 'P':\n          if (tokens[i]['text']['content'] === '.' || tokens[i]['text']['content'] === '!' || tokens[i]['text']['content'] === '?') {\n            if (i < tokens.length - 1) {\n              console.log(tokens[i + 1]['text']['content'] === '-');\n            }\n            if (i < tokens.length - 1\n              && !(tokens[i + 1]['text']['content'] === '.'\n                || tokens[i + 1]['text']['content'] === '!'\n                || tokens[i + 1]['text']['content'] === '?'\n                || tokens[i + 1]['text']['content'] === '-')) {\n              this.addChunk(chunkPositionList, i + 1, tokens, 'punctuation: ' + i);\n            }\n          }\n          break;\n        case 'CC':\n          // chunk if words behind and after too long\n          const indexFirst = tokens[i]['dependencyEdge']['headTokenIndex'];\n          if (i < indexFirst) {\n            break;\n          }\n          let indexSecond: number;\n          for (let k = i + 1; k < tokens.length; k++) {\n            if (this.checkLabel(['CONJ'], k, tokens) && tokens[k]['dependencyEdge']['headTokenIndex'] === indexFirst) {\n              indexSecond = k;\n              break;\n            }\n          }\n          if (typeof indexSecond === 'undefined') {\n            break;\n          }\n          let count = indexSecond - indexFirst;\n          let a = indexFirst - 1;\n          while (a > 0 && tokens[a]['dependencyEdge']['headTokenIndex'] === indexFirst) {\n            count++;\n            a--;\n          }\n          let b = indexSecond + 1;\n          while (b > tokens.length - 1 && tokens[b]['dependencyEdge']['headTokenIndex'] === indexSecond) {\n            count++;\n            b++;\n          }\n          if (count > 2) {\n            this.addChunk(chunkPositionList, i, tokens, 'cc :' + i);\n          }\n          break;\n        case 'AUX':\n          // chunk if following is verb, example 'to do'\n          if (i > 0 && i < tokens.length - 2 && tokens[i]['partOfSpeech']['tag'] === 'PRT'\n            && tokens[i + 1]['partOfSpeech']['tag'] === 'VERB') {\n            this.addChunk(chunkPositionList, i, tokens, 'aux :' + i);\n          }\n          break;\n        case 'VMOD':\n          // chunk before vmod if previous word not verb\n          if (i > 2 && tokens[i - 1]['partOfSpeech']['tag'] !== 'PRT') {\n            this.addChunk(chunkPositionList, i, tokens, 'vmod :' + i);\n          }\n          break;\n        case 'ADVMOD':\n          // chunk before vmod if previous word not verb\n          if (i > 2 && (tokens[i]['text']['content'] === 'as'\n            || tokens[i]['text']['content'] === 'when' || tokens[i]['text']['content'] === 'where')) {\n            this.addChunk(chunkPositionList, i, tokens, 'advmod :' + i);\n          }\n          break;\n        default:\n          break;\n      }\n    }\n\n    this.handleTooLongPart(tokens, chunkPositionList);\n    this.removeTooShortPart(tokens, chunkPositionList);\n\n    return chunkPositionList;\n  }\n\n  // chunk after verb, keep following prt if exists\n  private handleVerb(tokens: any, index: number, chunkPositionList: Record<number, number>) {\n    if (index !== tokens.length - 1 &&\n      ((this.checkLabel(['PRT', 'XCOMP'], index + 1, tokens) && tokens[index + 1]['dependencyEdge']['headTokenIndex'] === index)\n        || this.checkLabel(['ACOMP'], index + 1, tokens))\n    ) {\n      if (index + 1 < tokens.length - 1) {\n        this.addChunk(chunkPositionList, index + 2, tokens, 'verb :' + index);\n      }\n    } else {\n      if (index !== tokens.length - 1) {\n        this.addChunk(chunkPositionList, index + 1, tokens, 'verb :' + index);\n      }\n    }\n  }\n\n  // check length of subject if too long, chunk subj / verb\n  private handleSubj(tokens: any, index: number, chunkPositionList: Record<number, number>) {\n    if (!(index < tokens.length - 1 && ((<string>tokens[index + 1]['text']['content']).startsWith('\\'')\n      || (<string>tokens[index + 1]['text']['content']).startsWith('\\â')))) {\n      const verbIndex = tokens[index]['dependencyEdge']['headTokenIndex'];\n      const verbIndexHead = tokens[verbIndex]['dependencyEdge']['headTokenIndex'];\n\n      let k = index - 1;\n      while (k >= 0 && (tokens[k]['dependencyEdge']['headTokenIndex'] === index\n        || tokens[k]['dependencyEdge']['headTokenIndex'] === k + 1\n        || tokens[k]['dependencyEdge']['headTokenIndex'] === verbIndex\n        || (tokens[k]['dependencyEdge']['headTokenIndex'] === verbIndexHead && !this.checkLabel(['P'], k, tokens))\n        || this.checkLabel(['ADVMOD', 'AMOD', 'PS'], index - 1, tokens))) {\n        k--;\n      }\n      if (k > 0) {\n        this.checkCCAndChunk(chunkPositionList, k + 1, tokens, 'nsubj: ' + index);\n      }\n\n      if (verbIndex < index) {\n        if (index !== tokens.length - 1 &&\n          ((this.checkLabel(['PRT'], verbIndex + 1, tokens) && tokens[verbIndex + 1]['dependencyEdge']['headTokenIndex'] === verbIndex)\n            || this.checkLabel(['ACOMP'], verbIndex + 1, tokens))\n        ) {\n          if (verbIndex + 1 < tokens.length - 1) {\n            delete chunkPositionList[verbIndex + 2];\n          }\n        } else {\n          if (verbIndex !== tokens.length - 1) {\n            delete chunkPositionList[verbIndex + 1];\n          }\n        }\n      } else {\n        let count = verbIndex - index + 1;\n\n        if (verbIndex < tokens.length - 1 &&\n          this.checkLabel(['PRT'], verbIndex + 1, tokens) && tokens[verbIndex + 1]['dependencyEdge']['headTokenIndex'] === index) {\n          count++;\n        }\n        let j = index - 1;\n        while (j >= 0 && tokens[j]['dependencyEdge']['headTokenIndex'] <= verbIndex\n          && (tokens[j]['dependencyEdge']['headTokenIndex'] >= j)) {\n          count++;\n          j--;\n        }\n\n        if (count > 5) {\n          if (verbIndex > 2 && (this.checkLabel(['AUX', 'AUXPASS'], verbIndex - 2, tokens))) {\n            this.addChunk(chunkPositionList, verbIndex - 2, tokens, 'subj + aux 2:' + index);\n          } else {\n            if (verbIndex > 1 && (this.checkLabel(['AUX', 'AUXPASS'], verbIndex - 1, tokens))) {\n              this.addChunk(chunkPositionList, verbIndex - 1, tokens, 'subj + aux 1:' + index);\n            } else {\n              if (verbIndex > 1) {\n                this.addChunk(chunkPositionList, verbIndex, tokens, 'subj:' + index);\n              }\n            }\n          }\n        }\n        console.log('count ' + index + ': ' + count);\n      }\n    }\n  }\n\n  private handleTooLongPart(tokens: any, chunkPositionList: Record<number, number>) {\n    const keys = Object.keys(chunkPositionList);\n    let previousKey = 0;\n    let key, length: number;\n    for (let index = 0; index < keys.length; index++) {\n      key = keys[index];\n      if (chunkPositionList.hasOwnProperty(key)) {\n        length = +key - previousKey;\n        if (length >= 6) {\n          const stringlength = +tokens[key]['text']['beginOffset'] - +tokens[previousKey]['text']['beginOffset'];\n          console.log(stringlength);\n          if (stringlength >= 35) {\n            const prepList = [];\n            const commaList = [];\n            for (let i = previousKey + 2; i < +key; i++) {\n              switch (tokens[i]['dependencyEdge']['label']) {\n                case 'PREP':\n                  // if (i > 1 && tokens[i - 1]['partOfSpeech']['tag'] === 'VERB') {\n                  //   break;\n                  // }\n                  if (i > 2 && (this.checkLabel(['AUX', 'AUXPASS'], i - 1, tokens))\n                    && tokens[i - 1]['dependencyEdge']['headTokenIndex'] > i) {\n                    break;\n                  }\n                  // if (tokens[i]['text']['content'] === 'of') {\n                  //   prepList.push(i + 1);\n                  // } else {\n                  prepList.push(i);\n                  // }\n                  break;\n                case 'P':\n                  if (tokens[i]['text']['content'] === ',' || tokens[i]['text']['content'] === ';') {\n                    commaList.push(i);\n                  }\n                  break;\n                default:\n                  break;\n              }\n            }\n            this.chunkTooLong(tokens, chunkPositionList, prepList, commaList, +key, previousKey);\n          } else {\n            console.log('not too long 1: ' + stringlength);\n          }\n        }\n        previousKey = +key;\n      }\n    }\n    key = tokens.length - 1;\n    length = +key - previousKey + 1;\n    if (length >= 6) {\n      const stringlength = +tokens[key]['text']['beginOffset'] - +tokens[previousKey]['text']['beginOffset'];\n      if (stringlength >= 35) {\n        console.log(previousKey + ' to ' + key + ' too long: ' + stringlength);\n        const prepList = [];\n        const commaList = [];\n        for (let i = previousKey + 2; i < +key; i++) {\n          switch (tokens[i]['dependencyEdge']['label']) {\n            case 'PREP':\n              prepList.push(i);\n              break;\n            case 'P':\n              if (tokens[i]['text']['content'] === ',' || tokens[i]['text']['content'] === ';') {\n                commaList.push(i);\n              }\n              break;\n            default:\n              break;\n          }\n        }\n        this.chunkTooLong(tokens, chunkPositionList, prepList, commaList, +key, previousKey);\n      } else {\n        console.log('not too long 2: ' + stringlength);\n      }\n    }\n    console.log(chunkPositionList);\n  }\n\n  private chunkTooLong(tokens: any, chunkPositionList: Record<number, number>, prepList: number[],\n    commaList: number[], key: number, previousKey: number) {\n    console.log(previousKey + ' to ' + key + ' too long: ');\n\n    let closest = null;\n    if (prepList.length !== 0) {\n      console.log(prepList);\n      const goal = (key + previousKey) / 2;\n      console.log('goal: ' + goal);\n      closest = prepList.reduce(function (prev, curr) {\n        return (Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev);\n      });\n      if (closest < key && closest > previousKey) {\n        this.addChunk(chunkPositionList, closest, tokens, 'too long part prep: ' + closest);\n\n        const index = prepList.indexOf(closest);\n        prepList.splice(index, 1);\n      } else {\n        closest = null;\n      }\n    } else {\n      if (commaList.length !== 0) {\n        console.log(commaList);\n        const goal = (+key + previousKey) / 2;\n        console.log('goal: ' + goal);\n        closest = commaList.reduce(function (prev, curr) {\n          return (Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev);\n        });\n        console.log('closest: ' + closest);\n\n        if (closest < key && closest > previousKey) {\n          this.addChunk(chunkPositionList, closest + 1, tokens, 'too long part comma:' + closest);\n\n          const index = commaList.indexOf(closest);\n          commaList.splice(index, 1);\n        } else {\n          closest = null;\n        }\n      }\n    }\n    if (closest !== null) {\n      const length1 = +tokens[closest]['text']['beginOffset'] - +tokens[previousKey]['text']['beginOffset'];\n      const length2 = +tokens[key]['text']['beginOffset'] - +tokens[closest]['text']['beginOffset'];\n      console.log('1: ' + length1 + ' 2: ' + length2);\n      if (length1 > 30) {\n        this.chunkTooLong(tokens, chunkPositionList, prepList, commaList, closest, previousKey);\n      }\n      if (length2 > 30) {\n        this.chunkTooLong(tokens, chunkPositionList, prepList, commaList, key, closest);\n      }\n    }\n  }\n\n  private removeTooShortPart(tokens: any, chunkPositionList: Record<number, number>) {\n    const keys = Object.keys(chunkPositionList);\n    let previousKey = 0;\n    let key, length;\n    for (let index = 0; index < keys.length; index++) {\n      key = keys[index];\n      if (chunkPositionList.hasOwnProperty(key)) {\n        length = +key - previousKey;\n        if (length === 1) {\n          if ((tokens[previousKey]['partOfSpeech']['tag'] === 'VERB' && !this.checkLabel(['VMOD'], previousKey, tokens) ||\n            (previousKey > 0 && this.checkLabel(['P'], previousKey - 1, tokens)))) {\n            delete chunkPositionList[key];\n          } else {\n            if (tokens[previousKey]['dependencyEdge']['headTokenIndex'] < previousKey\n              || (!this.checkLabel(['ADVMOD'], previousKey, tokens) && this.isConjugateVerb(previousKey - 1, tokens))) {\n              delete chunkPositionList[previousKey];\n              console.log('previous');\n            } else {\n              delete chunkPositionList[key];\n              console.log('next');\n            }\n          }\n          if (this.debug) {\n            console.log('remove chunk too short: ' + key);\n          }\n        }\n        if (length === 2) {\n          if (previousKey !== 0 && this.checkLabel(['P'], +key - 1, tokens)) {\n            // if (tokens[previousKey]['partOfSpeech']['tag'] === 'VERB') {\n            //   delete chunkPositionList[key];\n            // } else {\n            //   if (tokens[previousKey]['dependencyEdge']['headTokenIndex'] < previousKey) {\n            delete chunkPositionList[previousKey];\n            // } else {\n            //   delete chunkPositionList[key];\n            // }\n            // }\n            if (this.debug) {\n              console.log('remove chunk too short: ' + key);\n            }\n          }\n        }\n        previousKey = +key;\n      }\n    }\n    key = tokens.length - 1;\n    length = +key - previousKey + 1;\n    if (length === 1) {\n      delete chunkPositionList[previousKey];\n      if (this.debug) {\n        console.log('remove chunk too short: ' + key);\n      }\n    }\n    if (length === 2) {\n      if (previousKey !== 0 && this.checkLabel(['P'], +previousKey + 1, tokens)) {\n        delete chunkPositionList[previousKey];\n        if (this.debug) {\n          console.log('remove chunk too short: ' + key);\n        }\n      }\n    }\n    console.log(chunkPositionList);\n  }\n\n  private addChunk(chunkPositionList: Record<number, number>, index: number, tokens: any, message: string) {\n    if (index > 0 && index < tokens.length - 1) {\n      if (this.debug) {\n        console.log('add chunk ' + index + ' :' + message);\n      }\n      if (index > 1 && this.checkLabel(['P'], index - 1, tokens) &&\n        (tokens[index - 1]['text']['content'] === '(' ||\n          ((tokens[index - 1]['text']['content'] === '\"') && tokens[index - 1]['dependencyEdge']['headTokenIndex'] !== index))) {\n        chunkPositionList[index - 1] = tokens[index - 2]['text']['beginOffset'] + tokens[index - 2]['text']['content'].length;\n      } else {\n        let j = index;\n        while (j < tokens.length && this.checkLabel(['P'], j, tokens)) {\n          if (j < tokens.length - 1 && (tokens[j]['text']['content'] === '-'\n            || tokens[j]['text']['content'] === '(' || tokens[j]['text']['content'] === '\"')) {\n            break;\n          }\n          j++;\n        }\n        if (j < tokens.length - 2 && j > 0) {\n          if ((<string>tokens[j - 1]['text']['content']).includes('ã')) {\n            chunkPositionList[j] = tokens[j - 1]['text']['beginOffset'] + tokens[j - 1]['text']['content'].split('ã')[0].length;\n          } else {\n            chunkPositionList[j] = tokens[j - 1]['text']['beginOffset'] + tokens[j - 1]['text']['content'].length;\n          }\n        }\n      }\n      // if (this.checkLabel(['P'], index, tokens)) {\n      //   if (index < tokens.length - 2) {\n      //     chunkPositionList[index + 1] = tokens[index + 1]['text']['beginOffset'] - 1;\n      //   }\n      // } else {\n      //   chunkPositionList[index] = tokens[index]['text']['beginOffset'] - 1;\n      // }\n    }\n  }\n\n  private checkCCAndChunk(chunkPositionList: Record<number, number>, index: number, tokens: any, message: string) {\n    if (this.checkLabel(['CC'], index - 1, tokens)) {\n      this.addChunk(chunkPositionList, index - 1, tokens, message);\n    } else {\n      this.addChunk(chunkPositionList, index, tokens, message);\n    }\n  }\n\n  private checkLabel(label: string[], index: number, tokens: any) {\n    if (index < 0 || index >= tokens.lenght) {\n      return false;\n    }\n    let b = false;\n    for (let i = 0; i < label.length; i++) {\n      if (tokens[index]['dependencyEdge']['label'] === label[i]) {\n        b = true;\n        break;\n      }\n    }\n    return b;\n  }\n\n  private checkDependency(headTokenIndex: string, index: number, tokens: any) {\n    return tokens[index]['dependencyEdge']['headTokenIndex'] === headTokenIndex;\n  }\n\n  private checkTag(tag: string, index: number, tokens: any) {\n    return tokens[index]['partOfSpeech']['tag'] === tag;\n  }\n\n  private isConjugateVerb(index: number, tokens: any) {\n    if (index < 0 || index >= tokens.lenght) {\n      return false;\n    }\n    return tokens[index]['partOfSpeech']['tag'] === 'VERB' && (tokens[index]['partOfSpeech']['tense'] !== 'TENSE_UNKNOWN'\n      || tokens[index]['lemma'] !== tokens[index]['text']['content']);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-mglish-nl',\n  template: `\n    <p>\n      mglish-nl works!\n    </p>\n  `,\n  styles: []\n})\nexport class MglishNlComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { MglishNlComponent } from './mglish-nl.component';\n\n@NgModule({\n  declarations: [MglishNlComponent],\n  imports: [\n  ],\n  exports: [MglishNlComponent]\n})\nexport class MglishNlModule { }\n"],"names":[],"mappings":"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"}
